<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>CS50C-week9-kdurkin</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>

  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <!-- jQuery + UI -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

  <!-- Bootstrap -->
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'>

  <!-- Custom -->
  <link rel='stylesheet' href='css/inLeaflet.css'>

  <style>
    #leafMap {
      width: 100%;
      height: 85vh;
      margin: 0;
      padding: 0;
      display: block;
    }

    .squirrel-button-float {
      position: absolute;
      top: 15px;
      right: 30px;
      z-index: 1000;
      max-width: 240px;
    }

    .squirrel-button-box {
      background-color: rgba(255, 248, 225, 0.95);
      border: 2px solid #3f2805;
      border-radius: 12px;
      padding: 12px;
      box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .mini-header {
      position: absolute;
      top: 15px;
      left: 75px;
      background-color: rgba(255, 248, 225, 0.95);
      border: 2px solid #3f2805;
      border-radius: 8px;
      padding: 6px 12px;
      z-index: 999;
      font-weight: bold;
      color: black;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
    }
/* Mini header */
.mini-header {
  cursor: pointer;            
  transition: none;
  box-shadow: none;
}
.mini-header:hover {
  transform: none;
  box-shadow: none;
  filter: none;
}

/* hover animation */
.mini-header .logo-link img {
  border-radius: 6px;
  box-shadow: 1px 1px 3px rgba(0,0,0,.15);
  transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
}
.mini-header .logo-link img:hover {
  transform: scale(1.03);
  box-shadow: 2px 2px 6px rgba(0,0,0,.25);
  filter: brightness(1.05);
}

/* Back to TSOC link with underline on hover */
.mini-header .back-link {
  color: #2d1a0f;
  text-decoration: none;
  font-weight: 700;
}
.mini-header .back-link:hover {
  text-decoration: underline;
}
/* ---*/
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      background-color: #d37e0f;
    }

    h2, h3 {
      font-family: 'Segoe UI', sans-serif;
      color: #3f2805;
      font-weight: bold;
    }

    h2 {
      font-size: 1.5rem;
    }

    h3 {
      font-size: 1.2rem;
      font-weight: 500;
    }

    .btn-clear {
      margin-top: 12px;
      font-weight: bold;
      background-color: #b7dbc6;
      border: 1px solid #616161;
      width: 100%;
    }

    a.logo-link img {
      display: block;
    }

 .footer-bar {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-top: 12px;
    background-color: #d37e0f;
    padding: 8px 16px;
  }

  .footer-left {
    flex: 1;
  }

  .footer-right {
    background-color: black;
    color: whitesmoke;
    padding: 6px 12px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    min-width: 260px;
  }

  .footer-links {
    display: flex;
    gap: 12px;
    margin-bottom: 4px;
  }

  .footer-links a {
    color: #9cfbc4;
    text-decoration: none;
  }

  .footer-links a:hover {
    text-decoration: underline;
  }

  .map-data {
    font-size: 0.8rem;
    text-align: right;
    color: #ccc;
  }

  .btn-back-tsoc {
  background-color: #f3c7b8;     
  color: #4a2a1a;
  border: 1px solid #b36b5a;
  font-weight: 600;
}
.btn-back-tsoc:hover {
  background-color: #e9b6a6;
  color: #3a1f14;
  border-color: #a45f50;
}
.btn-back-tsoc:focus {
  box-shadow: 0 0 0 0.2rem rgba(179,107,90,0.35);
}

    .offcanvas { z-index: 1051; }
.mini-header { z-index: 1052; }


  @media (max-width: 768px) {
    .footer-bar {
      flex-direction: column;
      align-items: flex-start;
    }
    .footer-right {
      align-items: flex-start;
      width: 100%;
      margin-top: 8px;
    }
    .map-data {
      text-align: left;
    }
  }

  .leaflet-control-zoom {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 1050 !important;
  }
  /* pin them */
 /* .leaflet-top.leaflet-left { top: 12px !important; left: 12px !important; }*/

  </style>
</head>

<body>
  <button class="btn btn-dark d-lg-none position-fixed"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#speciesPanel"
        aria-controls="speciesPanel"
        style="top:12px; right:12px; z-index:1051;">
  Species List
</button>
<div class="offcanvas offcanvas-end d-lg-none" tabindex="-1" id="speciesPanel" aria-labelledby="speciesPanelLabel" style="z-index:1051;">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="speciesPanelLabel">Species List</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <a href="../html/identification.html" class="btn btn-outline-secondary btn-back-tsoc w-100 mb-3">← Back to TSOC</a>

    <button data-number="1" class="btn btn-primary tog w-100 mb-2">Douglas Squirrel</button>
    <button data-number="2" class="btn btn-secondary tog w-100 mb-2">Western Gray</button>
    <button data-number="3" class="btn btn3 tog w-100 mb-2">Flying Squirrel</button>
    <button data-number="4" class="btn btn4 tog w-100 mb-2">Fox Squirrel</button>
    <button data-number="5" class="btn btn5 tog w-100 mb-2">Eastern Gray</button>
    <button data-number="6" class="btn btn6 tog w-100 mb-2">Ground Squirrel</button>
    <button data-number="8" class="btn btn8 tog w-100 mb-2">Golden Mantled</button>
    <button data-number="7" class="btn btn7 tog w-100 mb-2">Antelope Squirrel</button>

    <button id="clearAllMobile" class="btn btn-clear w-100 mt-3">CLEAR ALL</button>
  </div>
</div>

  <!-- Floating Header -->
<div id="miniHeader" class="mini-header d-none d-lg-flex align-items-center">
  <a href="../html/identification.html" class="logo-link">
    <img src="../logo/TSOClogo.png" alt="TSOC logo" width="70">
  </a>
  <a href="../html/identification.html" class="back-link ms-3">← Back to TSOC</a>
</div>

  <!-- Floating Buttons -->
  <div class="squirrel-button-float d-none d-lg-block">
    <div class="squirrel-button-box">
      <h5 class="mb-3">SPECIES LIST</h5>
      <button id='btn1' data-number="1" class="btn btn-primary tog w-100 mb-2">Douglas Squirrel</button>
      <button id='btn2' data-number="2" class="btn btn-secondary tog w-100 mb-2">Western Gray</button>
      <button id='btn3' data-number="3" class="btn btn3 tog w-100 mb-2">Flying Squirrel</button>
      <button id='btn4' data-number="4" class="btn btn4 tog w-100 mb-2">Fox Squirrel</button>
      <button id='btn5' data-number="5" class="btn btn5 tog w-100 mb-2">Eastern Gray</button>
      <button id='btn6' data-number="6" class="btn btn6 tog w-100 mb-2">Ground Squirrel</button>
      <button id='btn8' data-number="8" class="btn btn8 tog w-100 mb-2">Golden Mantled</button>
      <button id='btn7' data-number="7" class="btn btn7 tog w-100 mb-2">Antelope Squirrel</button>
      <button id="clearAll" class="btn btn-clear">CLEAR ALL</button>
    </div>
  </div>

  <div class="container-fluid p-3">
    <div id="leafMap"></div>
 
     <!-- Footer -->
<footer class="footer-bar">
  <div class="footer-left">
    <h2 class="m-0">Tree Squirrels of California Range Maps</h2>
    <h3 class="m-0" style="margin-top:-4px;">Select a squirrel from the species list to see its habitat range.</h3>
  </div>
  <div class="footer-right">
    <div class="footer-links">
      <a href="../index.html">Home</a>
      <a href="../html/about.html">About</a>
      <a href="../html/contact.html">Contact</a>
    </div>
    <span class="map-data">Map data: California Dept. of Fish and Wildlife via ArcGIS Online</span>
  </div>
</footer>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src='js/squirrelMap.js'></script>

  <script>
    // CLEAR ALL functionality
    $(document).ready(function () {
      $('#clearAll').click(function () {
        $('button.tog.active').each(function () {
          $(this).trigger('click');
        });
      });
    });
  </script>
  <script>
  // Close offcanvas after any species button tap
  document.addEventListener('click', function (e) {
    if (e.target.closest('.offcanvas .tog')) {
      const oc = bootstrap.Offcanvas.getInstance(document.getElementById('speciesPanel'));
      if (oc) oc.hide();
    }
  });

  // Mobile CLEAR ALL uses same toggle logic
  $(function () {
    $('#clearAllMobile').on('click', function () {
      $('button.tog.active').each(function () { $(this).trigger('click'); });
      const oc = bootstrap.Offcanvas.getInstance(document.getElementById('speciesPanel'));
      if (oc) oc.hide();
    });
  });
</script>
</body>

</html>